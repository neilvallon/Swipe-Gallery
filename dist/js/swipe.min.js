/*!
 * Copyright (c) 2014 Neil Vallon (http://neil.vallon.me)
 * Licensed under MIT (http://opensource.org/licenses/MIT)
 */
(function($){$.fn.swipeGallery=function(){var flickrParser=function(json){var imageList=[];$(json.items).each(function(){imageList.push({title:this.title,artist:this.author,url:this.link,image:this.media.m})});return imageList};var distributeimages=function(imgNum,pxWidth){var builder,base;builder=function(remainder,acumFun){var a,newFun;if(remainder===0){return acumFun}a=Math.ceil(imgNum/remainder);newFun=function(x){return acumFun(x)+(x%a===0)};return builder(remainder-Math.floor(imgNum/a),newFun)};base=function(){return Math.floor(pxWidth/imgNum)};return builder(pxWidth%imgNum,base)};var changeImage=function(domObj,infoBar,img){domObj.css("background-image","URL('"+img.image.replace("_m","")+"')");infoBar.html("<h3>"+img.title+"</h3><h5>"+img.artist+"</h5>")};var renderGallery=function(domObj,imgList){var distribution,hoverContainer,infoContainer;hoverContainer=$("<div class='rContainer'></div>");infoContainer=$("<div class='info'></div>").css("top",-domObj.height());domObj.append([hoverContainer,infoContainer]);changeImage(domObj,infoContainer,imgList[0]);$(window).resize(function(){hoverContainer.html("");distribution=distributeimages(imgList.length,domObj.width());$(imgList).each(function(i,img){var elm=$("<span class='rollover'></span>").css("width",distribution(i+1)).click(function(){window.open(img.url,"_blank")}).mouseover(function(){changeImage(domObj,infoContainer,img)});hoverContainer.append(elm);var i=new Image;i.src=img.image.replace("_m","")})}).trigger("resize")};return this.each(function(i,obj){var feedid,url;feedid=$(obj).data("feed-id");url="http://ycpi.api.flickr.com/services/feeds/groups_pool.gne?id="+feedid+"&jsoncallback=?";$.getJSON(url,{format:"json"}).done(function(data){var parsedImages=flickrParser(data);renderGallery($(obj),parsedImages)})})}})(jQuery);
